# NSCppPluginTemplate

A C++ plugin template for Northstar (Titanfall 2).

## Prerequisites

- **MinGW-w64**: For cross-compiling to Windows
  ```bash
  sudo pacman -S mingw-w64-gcc
  ```
- **CMake**: Build system
  ```bash
  sudo pacman -S cmake
  ```

## Building

### Quick Build
Simply run the build script:
```bash
./build.sh
```

This will:
1. Cross-compile the plugin as a Windows DLL
2. Automatically copy it to your Northstar plugins directory
3. Display build status and file information

### Manual Build
If you prefer to build manually:

```bash
# Create build directory
mkdir -p build-windows && cd build-windows

# Create toolchain file
cat > mingw-toolchain.cmake << 'EOF'
set(CMAKE_SYSTEM_NAME Windows)
set(CMAKE_SYSTEM_PROCESSOR x86_64)
set(CMAKE_C_COMPILER x86_64-w64-mingw32-gcc)
set(CMAKE_CXX_COMPILER x86_64-w64-mingw32-g++)
set(CMAKE_RC_COMPILER x86_64-w64-mingw32-windres)
set(CMAKE_FIND_ROOT_PATH /usr/x86_64-w64-mingw32)
set(CMAKE_FIND_ROOT_PATH_MODE_PROGRAM NEVER)
set(CMAKE_FIND_ROOT_PATH_MODE_LIBRARY ONLY)
set(CMAKE_FIND_ROOT_PATH_MODE_INCLUDE ONLY)
EOF

# Configure and build
cmake .. -DCMAKE_TOOLCHAIN_FILE=mingw-toolchain.cmake -DCMAKE_BUILD_TYPE=Release
make -j$(nproc)

# Copy to Northstar (adjust path as needed)
cp libCppPluginExample.dll ~/Games/Steam/steamapps/common/Titanfall2/R2Northstar/plugins/
```

## Cleaning

To remove build artifacts and the plugin from Northstar:
```bash
./clean.sh
```

## Output

The build produces `libCppPluginExample.dll`, which is automatically installed to:
```
~/Games/Steam/steamapps/common/Titanfall2/R2Northstar/plugins/
```

## Plugin Structure

- `src/CppPluginExample.cpp` - Main plugin logic
- `src/CppPluginExample.h` - Plugin header
- `src/PluginConfiguration.h` - Plugin configuration
- `src/interfaces/` - Northstar interface implementations
- `src/interfaces/exposed/` - Interfaces this plugin exposes
- `src/interfaces/Northstar/` - Interfaces from Northstar

## Development Notes

- The plugin entry point is in `IPluginCallbacks::Init`
- Use `g_nssys->Log()` for logging
- See source files for examples of interacting with Northstar APIs

## Troubleshooting

**Build fails with "Windows.h not found":**
- Make sure MinGW-w64 is properly installed
- The build script should handle this automatically

**Plugin doesn't load in Northstar:**
- Check that the DLL is in the correct plugins directory
- Verify the plugin configuration in `PluginConfiguration.h`
- Check Northstar logs for error messages

## Notes
- All credits go to this initial template: https://github.com/uniboi/NSCppPluginTemplate.git
- The additions were completely generated by AI because I cannot be fucked to do it lol
- You'll most likely need to change the file paths, womp womp
- i use arch btw